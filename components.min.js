/*!
* components.js
*
* @version beta
* @author SBKame
*/

(function($){$.fn.rollover=function(a){var b=a?a:{};return this.each(function(){new $.Rollover(this,b)})};$.Rollover=function(a,b){this.$elem=$(a);this.setting=$.extend(this.setting,b);this.src=this.$elem.attr('src');this.ovSrc=this.src.replace(/\.[a-z]+$/,this.setting.suffix+'$&');this.init()};$.Rollover.prototype={init:function(){var a=this;this.preload();this.$elem.mouseover(function(){a.over()}).mouseout(function(){if(!$(this).is('.keep')){a.out()}})},preload:function(){$('<img />').attr('src',this.ovSrc)},over:function(){this.$elem.attr('src',this.ovSrc)},out:function(a){if(!a){this.$elem.attr('src',this.src)}},setting:{suffix:"_on",keep:false}};$.fn.opover=function(a){var b={speed:0,opacity:0.7};var c=a?a:{};b=$.extend(b,c);this.hover(function(){$(this).animate({opacity:b.opacity},b.speed)},function(){$(this).animate({opacity:1},b.speed)})};$.linker=function(a){this.settings={icon:{blank:'/img/icon_blank.gif',pdf:'/img/icon_pdf.gif',word:'/img/icon_doc.gif',excel:'/img/icon_xls.gif'},spanClass:'.anchorInner',notIconClass:'.notIcon',blankLink:[],extendLink:'.boxLink'};var b=a||{};this.settings=$.extend(this.settings,b);this.domain=document.domain;this.init()};$.linker.prototype={init:function(){var b=this;$(this.target()).each(function(){$(this).data('blank',true);if(b.settings.icon&&!$(this).is(b.settings.notIconClass+' a')&&!$(this).is(b.settings.notIconClass)){b.setIcon(this)}}).click(function(e){e.preventDefault();var a=$(this).attr('href');window.open(a,'_blank')});this.extendLink()},target:function(){var a=new String;a='a[href ^= "http://"]:not([href *= "'+this.domain+'"]),'+'a[href ^= "https://"]:not([href *= "'+this.domain+'"]),'+this.blankLinks()+'a[href $= ".pdf"],'+'a[href $= ".xls"], a[href $= ".xlsx"],'+'a[href $= ".doc"],a[href $= ".docx"]';return a},blankLinks:function(){var a=new String;var b=this.settings.blankLink.length;for(var i=-1;++i<b;){a+='a[href *= "'+this.domain+this.settings.blankLink[i]+'"],'};return a},setIcon:function(a){var b=this;var c,_src,_alt;if($(a).is('[href $= ".pdf"]')){_src=this.settings.icon.pdf;_alt='PDF\u30d5\u30a1\u30a4\u30eb\u304c\u958b\u304d\u307e\u3059'}else if($(a).is('[href $= ".xls"]')||$(a).is('[href $= ".xlsx"]')){_src=this.settings.icon.excel;_alt='EXCEL\u30d5\u30a1\u30a4\u30eb\u304c\u958b\u304d\u307e\u3059'}else if($(a).is('[href $= ".doc"]')||$(a).is('[href $= ".docx"]')){_src=this.settings.icon.word;_alt='WORD\u30d5\u30a1\u30a4\u30eb\u304c\u958b\u304d\u307e\u3059'}else{_src=this.settings.icon.blank;_alt='\u5225\u30a6\u30a3\u30f3\u30c9\u30a6\u3067\u958b\u304d\u307e\u3059'};c='<img src="'+_src+'" alt="'+_alt+'" />';if($(a).css('text-decoration')=='underline'){$(a).addClass('noLine')};$(a).not(':has("img")').wrapInner('<span class="'+b.settings.spanClass.replace(/^\./,'')+'" />').append(c);return},extendLink:function(){$('a',this.settings.extendLink).off('click');$(this.settings.extendLink).click(function(){var a=$(this).find('a');var b=a.attr('href');if(a.data('blank')){window.open(b,'_blank')}else{window.open(b,'_self')};return false})}};$.NavActive=function(a,b){this.$wrap=$(a);this.$a=this.$wrap.find('a');this.settings=$.extend(this.settings,b);if(this.$a.is(':has("img")')){this.isImage=true;this.$a.children('img').rollover()};this.sort()};$.NavActive.prototype={sort:function(){var a=this;var b;var c=this.locate('path');this.$a.each(function(){b=$(this).attr('href').replace(a.locate('location'),'');if(c.search(b)==0){$(this).addClass('active');if(a.isImage){$(this).children('img').addClass('keep').trigger('mouseover')}}})},locate:function(a){if(!a)return false;switch(a){case'path':return this.url.path;case'location':return this.url.protocol+'//'+this.url.domain;case'domain':return this.url.domain;case'protocol':return this.url.protocol}},url:{protocol:location.protocol,domain:location.hostname,path:location.pathname},isImage:false,settings:{activeClass:'active'}};$.fn.navActive=function(a){var b=a||{};return this.each(function(){new $.NavActive(this,b)})};$.JTabNavigator=function(a,b){this.content=a;this.setting=$.extend(this.setting,b);this.$nav=$('.'+this.setting.navClass,this.content).find('a');this.isImage=this.$nav.children('img').length?true:false;this._hash=location.hash;this.hashSwitch=$(this._hash,this.content).length?true:false;this.init()};$.JTabNavigator.prototype={init:function(){var d=this;this.$nav.each(function(i){var a=new String,img=new Object;a=$(this).attr('href');if(d.isImage){img=$(this).children('img');img.rollover({suffix:d.setting.imgSuffix})};if((!d.hashSwitch&&i==0)||(d.hashSwitch&&a==d._hash)){d.show(this,a,img);if(d.hashSwitch){var b=$('body').offset().top;var c=$.support.boxModel?navigator.appName.match(/Opera/)?"html":"html,body":"body";$(c).scrollTop(b)}}else{d.hide(this,a,img)}}).click(function(){var a=new String,$img=new Object,$other=new Object,$otherTarget=new String,$otherImg=new Object;a=$(this).attr('href');$other=d.$nav.not($(this));$other.each(function(){$otherTarget+=$(this).attr('href')+','});if(d.isImage){$img=$(this).children('img');$otherImg=$other.children('img')};d.show(this,a,$img);d.hide($other,$otherTarget,$otherImg);return false})},show:function(a,b,c){if(this.isImage){$(c).addClass('keep').trigger('mouseover')};$(b).css({"position":"static","top":null,"left":null}).add(a).addClass(this.setting.activeClass)},hide:function(a,b,c){if(this.isImage){$(c).removeClass('keep').trigger('mouseout')};$(b).css({"position":"absolute","top":"-9999px","left":"-9999px"}).add(a).removeClass(this.setting.activeClass)},setting:{activeClass:"active",navClass:"tab",imgSuffix:'_on'}};$.fn.jTabNavigator=function(a){if($(this).length<1){return false};var b=a?a:{};return this.each(function(){new $.JTabNavigator(this,b)})};$.fn.flatColumns=function(a){var b=a?a:{};this.each(function(){return new $.FlatColumns(this,b)})};$.FlatColumns=function(a,b){var c=this;this.$elem=$(a);this.setting=$.extend({'target':false,'column':-1},b);this.$target=this.setting.target?this.$elem.find(c.setting.target):this.$elem.children();this.init()};$.FlatColumns.prototype={init:function(){var a=this;this.isSet=false;this.group=[];this.tmp=[];this._slice();this.send()},_slice:function(){var a=this;var b=this.setting.column;a.$target.each(function(i){if(b){a.isSet=(i+1)%b==0&&(i+1)/b>0};a.tmp.push($(this));if(a.isSet){a.group.push(a.tmp);a.tmp=[]}});if(this.tmp.length){this.group.push(this.tmp)}},send:function(){$.flatCore.flat(this.group);$.flatCore.observer.monitor(this.group)}};$.flatCore={flat:function(b){var c=b.length;for(i=0;i<c;++i){var d=0;$(b[i]).each(function(){var a=$(this).innerHeight();if(a>d){d=a}}).height(d)}},reFlat:function(a){var b=a.length;for(j=0;j<b;++j){$(a[j]).height('auto')};this.flat(a)},observer:{$elem:$('<div id="observer" />').text('observer').css({'position':'absolute','top':'-9999px','left':'-9999px'}),init:function(){var a=$('#contents').length?$('#contents'):$('body');a.append($.flatCore.observer.$elem);this._size=$('#observer').height();this.keep=[]},monitor:function(b){this.keep.push(b);var c=this;setInterval(function(){if(c.isChange()){var a=c.keep.length;for(k=0;k<a;++k){$.flatCore.reFlat(c.keep[k])}}},500)},isChange:function(){var a=$('#observer');var b=a.height();if(this._size==b){return false}else{this._size=b;return true}}}}$.flatCore.observer.init();$.fn.fontSize=function(b){var c=b?b:{};var d={'targetArea':'#contents','sizes':'87%,100%,114%','btnId':'fontSmall,fontMidium,fontLarge'};$.extend(d,c);var e;var f=document.cookie.split("; ");for(var i=0;i<f.length;++i){var g=f[i].split('=');if(g[0]=='fontSize'){e=g[1];break}};var h=['\u5c0f','\u4e2d','\u5927'];var j=d.sizes.split(',');var k=d.btnId.split(',');var l=j.length;if(l<k.length){k.splice(1,1);h.splice(1,1)};$(this).append('<ul id="fontSizeBtn" />');for(i=0;i<l;++i){$('#fontSizeBtn').append('<li id="'+k[i]+'"><span>'+h[i]+'</span></li>');$('#'+k[i]).data('size',j[i]);if(e=='undefined'&&j[i]=='100%'){e=j[i]}};var m=$('#fontSizeBtn').children('li');m.on('click',function(){var a=$(this).data('size');$(d.targetArea).css('font-size',a);document.cookie='fontSize='+a});$(d.targetArea).css('font-size',e)};$.fn.jAccordion=function(a){return this.each(function(){new $.JAccordion(this,a)})};$.JAccordion=function(a,b){this.setting=$.extend({headClass:'head',openClass:'open',closeClass:'close',speed:0,easing:'swing',autoClose:false},b);this.wrap=$(a);this.head=this.wrap.find('.'+this.setting.headClass);this.content=this.head.next();this.init()};$.JAccordion.prototype={init:function(){var b=this;this.head.css('cursor','pointer');this.content.each(function(){var a=$(this).prev('.'+b.setting.headClass);if($(this).hasClass(b.setting.openClass)){a.addClass(b.setting.openClass)}else{$(this).add(a).addClass(b.setting.closeClass).end().hide()}});this.action()},action:function(){var f=this;this.head.click(function(){var a=$(this).next();if($(this).hasClass(f.setting.openClass)){f.close($(this),a)}else{f.open($(this),a);if(f.setting.autoClose){var b=$(this);var c=b.closest(f.content).prev();var d=$(f.head,f.wrap).not(b).not(c);var e=d.next();f.close(d,e)}}})},open:function(a,b){b.animate({height:'show'},{duration:this.setting.speed,easing:this.setting.easing,queue:false}).add(a).removeClass(this.setting.closeClass).addClass(this.setting.openClass)},close:function(a,b){b.animate({height:'hide'},{duration:this.setting.speed,easing:this.setting.easing,queue:false}).add(a).removeClass(this.setting.openClass).addClass(this.setting.closeClass)}}}(jQuery));